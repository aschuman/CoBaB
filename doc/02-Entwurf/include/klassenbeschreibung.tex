\subsection{Übersicht}

\subsection{Model}

\subsection*{ConfigData}
Die Klasse ConfigData speichert die Benutzereinstellungen Sprache und Benachrichtigungston. Außerdem werden die Hilfe- und Aboutdateien gelesen.

Methoden
\begin{itemize}
\item \textit{private ConfigData()} Erzeugt ein neues ConfigData Objekt.
\item \textit{public ConfigData getInstance()} Liefert die ConfigData Instanz zurück. Dies stellt sicher, dass nur eine Instanz von ConfigData existiert.
\item \textit{public Language getLanguage()} Lädt die vom Benutzer gewählte Sprache.
\item \textit{public void setLanguage(Language language)} Speichert die vom Benutzer gewählte Sprache.
\item \textit{public bool getSoundOn()} Lädt die vom Benutzer gewählte Toneinstellung.
\item \textit{public void setSoundOn(bool soundOn)} Speichert die vom Benutzer gewählte Toneinstellung.
\item \textit{public QString getHelp()} Lädt die Hilfedatei und gibt deren Inhalt zurück.
\item \textit{public QString getAbout()} Lädt die Aboutdatei und gibt deren Inhalt zurück.
\end{itemize}

\subsection*{<<enumeration>> Language}
Language repräsentiert die verfügbaren Sprachen: Deutsch und Englisch.

\subsection*{Annotation : public Serializable}
Eine Annotation ist ein in den Datensätzen vordefinierter Bereich eines Bildes oder Videos, der den Typ face oder person haben kann.

Methoden
\begin{itemize}
\item \textit{public Annotation(QString id)} Gibt eine Instanz dieser Klasse zurück. Die übergebene id identifiziert die Annotation in einem Medium.
\item \textit{public QString getId()} Gibt die id der Annotation zurück.
\item \textit{public AnnotationType getType()} Gibt den Typ der Annotation zurück.
\item \textit{public friend QDataStream\& operator<<(QDataStream\& out, Annotation\& annotation)} Speichert die Annotation in einer Datei.
\item \textit{public friend QDataStream\& operator>>(QDataStream\& in, Annotation\& annotation)} Lädt die Annotation aus einer Datei.
\item \textit{public void toStream(QDataStream in)} Speichert die Annotation, durch den Aufruf von operator<<, in einer Datei.
\item \textit{public void fromStream(QDataStream out)} Lädt die Annotation, durch den Aufruf von operator>>, aus einer Datei.
\end{itemize}

\subsection*{RectangleAnnotation : public Annotation, public QRect}
Eine RectangleAnnotation ist eine rechteckige Annotation.

Methoden
\begin{itemize}
\item \textit{public RectangleAnnotation(QString id)} Erzeugt ein Objekt von RectangleAnnotation. Die übergebene id identifiziert die Annotation in einem Medium.
\item \textit{public friend QDataStream\& operator<<(QDataStream\& out, RectangleAnnotation\& annotation)} Speichert die RectangleAnnotation in einer Datei.
\item \textit{public friend QDataStream\& operator>>(QDataStream\& in, RectangleAnnotation\& annotation)} Lädt die RectangleAnnotation aus einer Datei.
\end{itemize}

\subsection*{DataPacket : public Serializable}
Ein DataPacket ist eine Eingabe für den Algorithmus.

Methoden
\begin{itemize}
\item \textit{public DataPacketType getType()} Gibt den Typ des DataPackets zurück, abhängig von der Kindklasse.
\item \textit{public abstract void toStream(QDataStream in)} Speichert das DataPacket, durch den Aufruf von operator<<, in einer Datei.
\item \textit{public abstract void fromStream(QDataStream out)} Speichert das DataPacket, durch den Aufruf von operator>>, in einer Datei.
\end{itemize}

\subsection*{<<enumeration>> DataPacketType}
DataPacketType enthält die Typen von DataPackets, also die vorhandenen Kindklassen.

\subsection*{SearchQuery : DataPacket}
Eine SearchQuery ist eine Suchanfrage an den Algorithmus.

Methoden
\begin{itemize}
\item \textit{public SearchQuery()} Erzeugt ein SearchQuery Objekt.
\item \textit{public QList<Dataset> getDatasets()} Gibt den Suchraum, in Form von einer Datensatzliste zurück.
\item \textit{public void setDatasets(QList<Dataset> datasets)} Setzt den Suchraum für die Suchanfrage.
\item \textit{public SearchObject getSearchObject()} Gibt das SearchObject für diese Anfrage zurück.
\item \textit{public void setSearchObject(SearchObject searchObject)} Setzt das SearchObject für diese Anfrage.
\item \textit{public friend QDataStream\& operator<<(QDataStream\& out, SearchQuery\& searchQuery)} Speichert die SearchQuery in einer Datei.
\item \textit{public friend QDataStream\& operator>>(QDataStream\& in, SearchQuery\& searchQuery)} Lädt die SearchQuery aus einer Datei.
\item \textit{public void toStream(QDataStream in)} Speichert die SearchQuery, durch den Aufruf von operator<<, in einer Datei.
\item \textit{public void fromStream(QDataStream out)} Lädt die SearchQuery, durch den Aufruf von operator>>, aus einer Datei.
\end{itemize}

\subsection*{SearchResult : DataPacket}
Ein SearchResult ist die Ausgabe eines Algorithmus. Allerdings kann es auch eine Eingabe sein, wenn ein Algorithmus auf einem bestehenden Suchergebnis weiterarbeitet.

Methoden
\begin{itemize}
\item \textit{public SearchResult(QList<SearchResultElement> list)} Erzeugt ein neues SearchResult, das eine Liste von SearchResultElements enthält.
\item \textit{public QList<SearchResultElement> getSearchResultList()} Gibt die Liste der SearchResultElements zurück.
\item \textit{public void sortByScore()} Sortiert die Ergebnisliste nach dem Score.
\item \textit{public friend QDataStream\& operator<<(QDataStream\& out, SearchResult\& searchResult)} Speichert das SearchResult in einer Datei.
\item \textit{public friend QDataStream\& operator>>(QDataStream\& in, SearchResult\& searchResult)} Lädt das SearchResult aus einer Datei.
\item \textit{public void toStream(QDataStream in)} Speichert das SearchResult, durch den Aufruf von operator<<, in einer Datei.
\item \textit{public void fromStream(QDataStream out)} Lädt das SearchResult, durch den Aufruf von operator>>, aus einer Datei.
\end{itemize}

\subsubsection*{SearchResultElement : public Serializable}
Ein SearchResultElement ist ein Element von SearchResult. Abgesehen von einem SearchObject enthält es einen Score für dieses, der durch den Algorithmus bestimmt und gesetzt wurde.

Methoden
\begin{itemize}
\item \textit{public SearchResultElement()} Erzeugt ein SearchResultElement.
\item \textit{public int getScore()} Gibt den Score für dieses Element zurück.
\item \textit{public void setScore(int score)} Setzt den Score für dieses Element.
\item \textit{public SearchObject getSearchObject()} Gibt das SearchObject zurück.
\item \textit{public void setSearchObject(SearchObject searchObject)} Setzt das übergebene SearchObject für das Element.
\item \textit{public friend QDataStream\& operator<<(QDataStream\& out, SearchResultElement\& searchResultElement)} Speichert das SearchResultElement in einer Datei.
\item \textit{public friend QDataStream\& operator>>(QDataStream\& in, SearchResultElement\& searchResultElement)} Lädt das SearchResultElemnt aus einer Datei.
\item \textit{public void toStream(QDataStream in)} Speichert das SearchResultElement, durch den Aufruf von operator<<, in einer Datei.
\item \textit{public void fromStream(QDataStream out)} Lädt das SearchResultElement, durch den Aufruf von operator>>, aus einer Datei.
\end{itemize}

\subsection*{SearchObject : public Serializable}
Das SearchObject repräsentiert eine Annotation oder ein Rechteck in einem Bild oder Frame eines Videos aus einem Datensatz.

Methoden
\begin{itemize}
\item \textit{public SearchObject} Erzeugt ein SearchObject.
\item \textit{public QString getMedium()} Gibt den Dateipfad des Mediums zurück.
\item \textit{public void setMedium(QString medium)} Setzt das Medium auf den gegebenen Dateipfad, relativ zum SourceDataset.
\item \textit{public Annotation getAnnotation()} Gibt die Annotation im Medium zurück.
\item \textit{public void setAnnotation(Annotation annotation)} Setzt eine Annotation eines Mediums für das SearchObject.
\item \textit{public QRect getROI()} Gibt ein QRect zurück, das die \enquote{region of interest} im Medium repräsentiert.
\item \textit{public void setROI(QRect ROI)} Setzt ein QRect als ROI.
\item \textit{public Dataset getSourceDataset} Gibt den Datensatz, in dem sich das Medium befindet zurück.
\item \textit{public void setSourceDataset(Dataset dataset)} Setzt den Datensatz, in dem sich das Medium befindet.
\item \textit{public int getMediumIndex()} Gibt den Index eines Mediums, also den Frame in einem Video zurück.
\item \textit{public void setMediumIndex(int index)} Setzt den MediumIndex.
\item \textit{public friend QDataStream\& operator<<(QDataStream\& out, SearchObject\& searchObject)} Speichert das SearchObject in einer Datei.
\item \textit{public friend QDataStream\& operator>>(QDataStream\& in, SearchObject\& searchObject)} Lädt das SearchObject aus einer Datei.
\item \textit{public void toStream(QDataStream in)} Speichert das SearchObject, durch den Aufruf von operator<<, in einer Datei.
\item \textit{public void fromStream(QDataStream out)} Lädt das SearchObject, durch den Aufruf von operator>>, aus einer Datei.
\end{itemize}

\subsection*{Feedback : DataPacket}
Das Feedback gibt an, wie gut das vom Algorithmus erzeugte Suchergebnis ist.

Methoden
\begin{itemize}
\item \textit{public Feedback(FeedbackType type)} Erzeugt ein neues Feedback Objekt. Der Typ kann entweder dual oder extended sein.
\item \textit{public int getFeedback()} Gibt den Wert des Feedbacks zurück.
\item \textit{public void setFeedback(int feedback)} Setzt das Feedback auf den übergebenen Wert.
\item \textit{public FeedbackType getFeedbackType()} Gibt den Feedback Typ zurück.
\item \textit{public SearchObject getSearchObject()} Gibt das SearchObject, zu dem dieses Feedback gehört zurück.
\item \textit{public void setSearchObject(SearchObject searchObject)} Setzt das SearchObject für dieses Feedback.
\item \textit{public friend QDataStream\& operator<<(QDataStream\& out, Feedback\& feedback)} Speichert das Feedback in einer Datei.
\item \textit{public friend QDataStream\& operator>>(QDataStream\& in, Feedback\& feedback)} Lädt das Feedback aus einer Datei.
\item \textit{public void toStream(QDataStream in)} Speichert das Feedback, durch den Aufruf von operator<<, in einer Datei.
\item \textit{public void fromStream(QDataStream out)} Lädt das Feedback, durch den Aufruf von operator>>, aus einer Datei.
\end{itemize} 

\subsubsection*{<<enumeration>> FeedbackType}
Der FeedbackType kann dual (positiv, negativ, neutral) oder extended (Werte von 1 bis 10) sein.

\subsection*{<<interface>> Serializable}
Das Interface Serializable ist dazu da, damit die implementierenden Klassen serialisierbar sind.

Methoden
\begin{itemize}
\item \textit{public void toStream(QDataStream in)} Speichert das serialisierbare Objekt in einer Datei.
\item \textit{public void fromStream(QDataStream out)} Lädt das serialisierbare Objekt aus einer Datei.
\end{itemize}

\subsection*{Bookmark : public Serializable}
Ein Bookmark speichert ein Suchergebnis, eine Suchanfrage und das Feedback, sodass ein früherer Suchvorgang wiederhergestellt werden kann.

Methoden
\begin{itemize}
\item \textit{public Bookmark(SearchResut result, QString algorithm, SearchQuery query} Erzeugt ein neues Bookmark.
\item \textit{public friend QDataStream\& operator<<(QDataStream\& out, Bookmark\& bookmark)} Speichert das Bookmark in einer Datei.
\item \textit{public friend QDataStream\& operator>>(QDataStream\& in, Bookmark\& bookmark)} Lädt das Bookmark aus einer Datei.
\item \textit{public void toStream(QDataStream in)} Speichert das Bookmark, durch den Aufruf von operator<<, in einer Datei.
\item \textit{public void fromStream(QDataStream out)} Lädt das Bookmark, durch den Aufruf von operator>>, aus einer Datei.
\end{itemize}

\subsection*{BookmarkList}
Die BookmarkList hält eine List von Bookmarks und speichert die Bookmarks.

Methoden
\begin{itemize}
\item \textit{public BookmarkList()} Erzeugt eine BookmarkList.
\item \textit{public void load(QString path)} Lädt die Bookmarks aus der Datei.
\item \textit{public void save(QString path)} Speichert die Bookmark Liste in der Datei mit dem übergebenen Pfad.
\item \textit{public void addBookmark(Bookmark bookmark)} Fügt ein Bookmark in die Liste hinzu.
\item \textit{public void removeBookmark(const Bookmark* bookmark)} Entfernt bookmark aus der Bookmark Liste.
\item \textit{public QList<Bookmark*> sortByName()} Gibt die Bookmark Liste nach Namen sortiert zurück.
\item \textit{public QList<Bookmark*> sortByDate()} Gibt die Bookmark Liste nach Datum sortiert zurück.
\item \textit{private void validateResult(SearchResult searchResult)} Überprüft, ob das übergebene SearchResult gültig ist, also noch alle Datensätze und Medien vorhanden sind.
\end{itemize}

\subsection*{Dataset}
Ein Dataset hat einen Typ und enthält Medien diesen Typs.

Methoden
\begin{itemize}
\item \textit{public Dataset(QString path)} Erzeugt einen Datensatz mit dem übergebenen Ordnerpfad.
\item \textit{public QString getName()} Gibt den Namen des Datensatzes (des Ordners) zurück.
\item \textit{public int getNumberOfMedia()} Gibt die Anzahl der Medien in der MediaList zurück.
\item \textit{public QImage getPreviewPhoto()} Gibt das Vorschaubild des Dtaensatzes zurück.
\item \textit{private void createPreviewPhoto()} Erstellt ein Vorschaubild aus den Medien.
\item \textit{public QList<Medium> getMediaList()} Gibt die Liste aller Medien zurück.
\item \textit{public QString getPath()} Gibt den absoluten Pfad des Datensatzes zurück.
\item \textit{public DatasetType getType()} Gibt den Typ des Datensatzes und damit auch der Medien zurück.
\end{itemize}

\subsection*{DatasetList}
Eine DatasetList hält eine List von Datensätzen und speichert sie.

Methoden
\begin{itemize}
\item \textit{public DatasetList()} Erzeugt eine DatasetList.
\item \textit{public QList<Dataset> getDatasetList()} Gibt die Liste der Datensätze zurück.
\item \textit{public void addDataset(Dataset dataset)} Fügt den übergebenen Dataset der Liste hinzu.
\item \textit{public void load(QString path)} Lädt die Datensatzliste aus der Datei mit dem übergebenen Pfad.
\item \textit{public void store(QString path)} Speichert die Datensatzliste in der Datei mit dem übergebenen Pfad.
\end{itemize}

\subsection*{DatasetType}
Der Datensatztyp kann photo, video oder single frame video sein.

\subsection*{Medium}
Ein Medium wird durch einen Pfad charakterisiert. Außerdem hat ein Medium eine Liste von Annotationen und dem zugehörigen Index. Der Index ist bei Photos 0, in Videos gibt er an, in welchem Frame sich die Annotation befindet.

Methoden
\begin{itemize}
\item \textit{public Medium(QString path, QList<QPair<int, Annotation>> annotations)} Erzeugt ein Medium, das den übergebenen Pfad und die Annotationsliste hat.
\item \textit{public MediumType getType()} Gibt den Typ des Mediums zurück.
\item \textit{public QList<QPair<int, Annotation>>} Gibt die Liste der Annotationen zurück.
\end{itemize}

\subsection*{<<enumeration>> MediumType}
Der MediumType gibt den Typ des Meiums an: photo, video oder single frame video.

\subsection*{Photo : public Medium}
Ein Photo ist ein Bild, in dem Annotationen sein können.

Methoden
\begin{itemize}
\item \textit{public Photo(QString path} Erzeugt ein Photo, mit dem übergebenen Pfad.
\end{itemize}

\subsection*{SingleFrameVideo : public Medium}
Ein SingelFrameVideo ist ein Video aus Einzebildern.

Methoden
\begin{itemize}
\item \textit{public SingleFrameVideo(QString path)} Erzeugt ein SingleFrameVideo.
\item \textit{public int getFramerate()} Gibt die Framerate des Videos zurück.
\item \textit{public QList<QString> getFrameList()} Gibt die Liste der Frames zurück.
\end{itemize}

\subsection*{Video : public Medium}
Ein Video aus einer Videodatei.

Methoden
\begin{itemize}
\item \textit{public Video(QString path)} Erzeugt ein Video aus dem übergebenen Pfad.
\end{itemize}

\subsection*{<<interface>> Algorithm}
\subsection*{<<interface>> SearchAlgorithm : public Algorithm}
\subsection*{TestAlgorithm : public SearchAlgorithm}
\subsection*{AlgorithmList}

\subsection{View}
\subsection*{PageWidget}
Ein PageWidget ist ein QWidget, das als eine Seite der grafischen Oberfläche im MainWindow dem Benutzer angezeigt wird. Die abstrakte Klasse PageWidget bietet dem erbenden PageWidget, das momentan im MainWindow angezeigt wird, die Möglichkeit ein PageWidget auszusuchen, um es dem Benutzer als nächstes anzuzeigen, und diesem über den Stack des Navigators nötige Daten weiterzugeben.

\subsection*{<<enumeration>> PageType}
PageWidgets lassen sich beim Navigator mit einem PageType registrieren, welcher fortan zur Referenzierung dieses PageWidgets dient.

\subsection*{PageWidgetDispatcher}
Kapselt Signale, die zum verwenden des Stacks des Navigators und dem wechseln des PageWidgets nötig sind. (Ohne diese Kapselung stünden diese Signale den speziellen PageWidgets zur Verfügung)

\subsection*{CMainWindow}

\subsection*{CViewerPageWidget}

\subsection*{CPhotoViewer}
\subsection*{CClickableQGraphicsPixmapItem}

\subsection*{CSingleFrameVideoViewer}
\subsection*{CSingleFrameVideoPlayer}
\subsection*{CGraphicsSingleFrameVideoItem}

\subsection*{CVideoViewer}
\subsection*{CClickableGraphicsVideoItem}


\subsection*{CCustomGraphicsView}
Diese Klasse benutzt ein QGraphicsView um ein Bild darzustellen, CAnnotationDrawer um die Annotationen die zum Bild gehören darzustellen und fügt die Möglichkeit hinzu, die Größe des Bildes zu verändern durch die ZoomInButton und ZoomOutButton, sowohl eine ROI(region of interest) zu zeichnen, nach der dann gesucht werden kann. Hier werden auch die die Klicks der Benutzer abgefangen und die Menü mit den Algoritmen gezeigt.  

\subsection*{CAnnotationDrawer}
Diese Klasse hat ein String, das bestimmt der Typ der Annotation und benutzt die CAnnotationGraphicsItemFactory, um ein korespondierendes ClickableGraphicsItem zu bekommen und dann zeigt dieses im CCustomGraphicsView.  
\subsection*{CAnnotationGraphicsItemFactory}
Das ist eine Fabrik, die unterschiedliche ClickableGraphicsItems bildet, um man die Annotationen, abhängig von deren Typ, durch den CAnnotationDrawer  darstellen zu können.
\subsection*{CClickableGraphicsIdRectItem}
Diese Klasse erbt von QGraphicsRectItem und fügt die Möglichkeit auf dieses Item zu klicken hinzu und zeigt die Id der Annotation. 
\subsection*{CClickableGraphicsRectItem}
Diese Klasse erbt von QGraphicsRectItem und fügt die Möglichkeit auf dieses Item zu klicken hinzu.

\subsection*{CLibraryPageWidget}
Das ist das Widget, in dem alle Datensätze dargestellt werden und man wählen kann, in welchem von denen man ein Bild wählen will, nach dem danach gesucht wird. Durch das ChooseDataSetButton kann man auch einen Datensatz wählen, der nicht im Datenbank liegt. 

\subsection*{CParameterPageWidget}
Das ist das Widget, in dem die Parameter für den entsprächenden Suchalgoritmus gezeigt und bestimmt werden. Sowohl werden die Datensätze, in denen gesucht wird bestimmt. Dann kann man zu CConfirmationPageWidget fortsetzen.

\subsection*{CConfirmationPageWidget}
Das ist das Widget, in dem man die Suchvorlage und alle Parameter wieder darstellt werden. Mit dem SearchButton  kann die Suche gestartet werden.

\subsection*{CResultsPageWidget}

\subsection*{CSearchResultModel}

\subsection*{CParameterModel}

\subsection*{CDatasetModel}

\subsection*{CMediaModel}

\subsection*{CIconDelegate}
Das ist eine Klasse, die von QStyledItemDelegate erbt und ist ein clickable IconDelegate, das aus einem Bild und darunter Text besteht. Diese nutzt man um die Datensätze in CLibraryPageWidget, CViewerPageWidget darzustellen und herauszufinden welcher von denen selectiert ist.

\subsection*{CCheckableIconDelegate}
Das ist eine Klasse, die von CIconDelegate erbt und ein Checkbox hinzufügt. Damit werden die Datensätze im CParameterPageWidget dargestellt und man bekommt die Information in welche von denen gesucht wird. 
\subsection*{CFeedbackDelegate}
Das ist eine Klasse, die von CIconDelegate erbt und kannt ein CFeedbackEditor benutzen um Feedback zu bekommen. Man nutzt diese Klasse um die Resultaten der Suche in CResultsPageWidget darzustellen mit der Option Feedback zu bekommen. 
\subsection*{CFeedbackEditor}
Diese Klasse stellt Feedback graphisch dar und bekommt die Wert des Feedbacks abhängig vom Typ des Feedbacks.
\subsection*{CFeedbackTrueFalse}
Diese Klasse stellt zweiwertiges Feedback dar.
\subsection*{CFeedback0to10}
Diese Klasse stellt zehnwertiges Feedback dar.


\subsection{Controller}
\subsection*{MainControl}
MainControl ist der Einstiegspunkt des Programms und verwaltet die Manager sowie den Navigator. Insbesondere erstellt MainControl die PageWidgets un registriert sie beim Navigator.
Da die Manager und der Navigator nicht direkt Kommunizieren, verbindet MainControl ihre Signals und Slots.

\subsection*{Navigator}
Der Navigator ist in der Lage das aktuell im MainWindow angezeigte PageWidget durch ein anderes zu ersetzen. Desweiteren ist der Navigator für den austausch von Daten zwischen den PageWidgets verantwortlich.

\subsection*{SearchManager}
Der SearchManager startet einen Algorithm in einem neuen Thread und leitet mögliche Informationen zum Fortschritt der Suche an das ResultsPageWidget weiter.

\subsection*{SearchResultManager}
Der SearchResultManager besitzt ein SearchResult und benachrichtigt das ResultsPageWidget über neue Suchergebnisse. Suchergebnisse können einzeln während der laufenden Suche hinzugefügt werden.

\subsection*{MainWindowManager}
Der MainWindowManager stellt die Bookmarks und Chronikeinträge dem MainWindow zur Verfügung und gibt bekannt welches Bookmark im MainWindow ausgewählt wurde, wenn eines ausgewählt wurde.

\subsection*{BookmarkManager}
Der BookmarkManager besitzt BookmarkLists für je die Chronik und die vom Benutzer erstellten Bookmarks. Einträge für diese BookmarkLists werden hinzugefügt und abgefragt über den BookmarkManager.
